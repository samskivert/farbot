#
# Releases
#
<Releases>
	# Release Build Working Directory
	BuildRoot	/export/freebsd/build

	# Install/NFS Directory
	# Clients will load installation data from this directory
	InstallRoot	/export/freebsd/netinstall

	# NFS/TFTP Server Host/IP
	# The host exporting the installation data.
	# Should probably be the local machine
	NFSHost		10.0.0.1

	<Release 6.0>
		# FreeBSD CVS Repository Mirror
		CVSRoot		/home/ncvs
		# Release Tag
		CVSTag		RELENG_6_0

		# Our local setup scripts and root overlay
		LocalData	/export/freebsd/example-local

		# Enable creation of ISO install images
		# Requires cdrtools 
		InstallCDs	True

                # Global package build options to be applied to every package
                # built in this release. Local BuildOptions will override this
                <PackageBuildOptions>
                        WITHOUT_X11 yes 
                </PackageBuildOptions>
	</Release>

	<Release 6-STABLE>
		# FreeBSD CVS Repository Mirror
		CVSRoot	/home/ncvs

		# Release Tag
		CVSTag	RELENG_6

		# Our local setup scripts and root overlay
		LocalData	/export/freebsd/example-local

		# Enable creation of ISO install images
		# Requires cdrtools 
		InstallCDs	True
	</Release>
</Releases>

#
# Partition Maps
#
<Partitions>
	# Standard Partition Map
	<PartitionMap Standard>
		<Partition 1>
			Mount		/
			Size		512MB
			Type		ufs
			SoftUpdates	no
		</Partition>

		<Partition 2>
			Size		4GB
			Type		swap
		</Partition>

		<Partition 3>
			Mount		/var
			Size		10GB
			Type		ufs
		</Partition>

		<Partition 4>
			Mount		/tmp
			Size		1GB
			Type		ufs
		</Partition>

		<Partition 5>
			# All remaining space
			Mount		/usr
			Size		0GB
			Type		ufs
		</Partition>
	</PartitionMap>

	# Dedicate the entire disk to /export
	<PartitionMap Export>
		<Partition 1>
			# The entire disk
			Mount		/export
			Size		0GB
			Type		ufs
		</Partition>
	</PartitionMap>

	# The older mars[1-9] machines have significantly smaller disks and
	# serve different needs than the rest of our servers. Partition
	# accordingly.
	<PartitionMap Mars>
		<Partition 1>
			Mount		/
			Size		512MB
			Type		ufs
			SoftUpdates	no
		</Partition>

		<Partition 2>
			# 1 gigabyte of RAM
			Size		2GB
			Type		swap
		</Partition>

		<Partition 3>
			Mount		/var
			Size		1536MB
			Type		ufs
		</Partition>

		<Partition 4>
			Mount		/tmp
			Size		1GB
			Type		ufs
		</Partition>

		<Partition 5>
			# All remaining space
			Mount		/usr
			Size		0GB
			Type		ufs
		</Partition>
	
	</PartitionMap>
</Partitions>

#
# Package Sets
#
<PackageSets>

	# Packages for all systems
	<PackageSet Base>
		# Time Keeping
		<Package>
			Port		net/openntpd
		</Package>

		# System Tools
		<Package>
			Port		security/sudo 
		</Package>
		<Package>
			Port		security/portaudit
		</Package>
		<Package>
			Port		sysutils/portupgrade
		</Package>
		<Package>
			Port		net/rsync
		</Package>

		# Editors
		<Package>
			Port		editors/vim-lite
		</Package>
		<Package>
			Port		editors/emacs
			<BuildOptions>
				WITHOUT_X11	YES
			</BuildOptions>
		</Package>

		# Shells
		<Package>
			Port		shells/zsh
		</Package>
		<Package>
			Port		shells/bash
		</Package>

		# Mail
		<Package>
			Port		mail/postfix
		</Package>

		# Authentication
		<Package>
			Port		security/pam_ldap
		</Package>
		<Package>
			Port		net/nss_ldap
		</Package>

		# Languages
		<Package>
			Port		lang/python
		</Package>
		<Package>
			Port		lang/ruby18
			Package		ruby
		</Package>

		# Network
		<Package>
			Port		net/quagga
		</Package>
	</PackageSet>

	<PackageSet Router>
		<Package>
			Port		security/openvpn
		</Package>
	</PackageSet>

	<PackageSet WebServer>
		<Package>
			Port		www/apache22
		</Package>
		<Package>
			Port		www/lighttpd
		</Package>
	</PackageSet>

	<PackageSet Database>
		<Package>
			Port		databases/postgresql81-server
		</Package>
		<Package>
			Port            databases/mysql50-server
		</Package>
	</PackageSet>
</PackageSets>


#
# Installation Types
#
<Installations>
	<Installation Router>
		Description	Fail-Over Router
		# Hardware requires 6.1
		Release		6-STABLE
		PackageSet      Base
		PackageSet      Router
		NetworkDevice	em2
		<Disk ad4>
			PartitionMap	Standard
		</Disk>
		<PostInstall>
 			Command /dist/local/example-local/local.sh router
		</PostInstall>
	</Installation>

	<Installation Database>
		Description	Database
		Release		6.0
		PackageSet      Base
		PackageSet      Database
		NetworkDevice	em0
		<Disk ad4>
			PartitionMap	Standard
		</Disk>
		<Disk ad6>
			PartitionMap	Export
		</Disk>
		<PostInstall>
 			Command /dist/local/example-local/local.sh database
		</PostInstall>
	</Installation>

	<Installation WebServer>
		Description	Web
		Release		6.0
		PackageSet      Base
		PackageSet      WebServer
		NetworkDevice	em0
		<Disk ad4>
			PartitionMap	Standard
		</Disk>
		<Disk ad6>
			PartitionMap	Export
		</Disk>
		<PostInstall>
 			Command /dist/local/example-local/local.sh webserver
		</PostInstall>
	</Installation>

	<Installation gameserver-supermicro>
		# Old 1st Gen SuperMicro.
		# Game Server Machine
		Description	Games! (1st Gen SuperMicro)
		Release		6.0
		PackageSet      Base
		PackageSet      Webserver
		NetworkDevice	em0
		<Disk ad0>
			PartitionMap	Standard
		</Disk>
		<Disk ad3>
			PartitionMap	Export
		</Disk>
		<PostInstall>
 			Command /dist/local/example-local/local.sh gameserver-supermicro
		</PostInstall>
	</Installation>

	<Installation Mars>
		Description	Mars Services
		Release		6.0
		PackageSet      Base
		# fxp1 is the interface on far right. Go figure.
		NetworkDevice	fxp1
		<Disk da0>
			PartitionMap	Mars
		</Disk>
		<PostInstall>
 			Command /dist/local/example-local/local.sh mars
		</PostInstall>
	</Installation>
</Installations>

<Logging>
	# Logging configuration
	<syslog>
		Level info
		Facility daemon
		Address /var/run/log
	</syslog>
#	<logfile>
		# Log debug messages to stdout
#		Level debug
#		Path STDOUT
#	</logfile>
</Logging>
