<!--
    ZConfig Configuration Schema for FARB
    farb_conf.xml vi:ts=4:sw=4:expandtab
-->
<schema prefix="farb.config">
    <!-- Release Configuration -->
    <sectiontype name="Release">
        <key name="CVSRoot" datatype="existing-directory" required="yes"/>
        <key name="CVSTag" datatype="string" required="yes"/>
        <key name="InstallCDs" datatype="boolean" required="no" default="false"/>
    </sectiontype>

    <sectiontype name="Releases" datatype=".releases_handler">
        <key name="BuildRoot" datatype="existing-directory" required="yes"/>
        <multisection type="Release" name="+" attribute="Release" required="yes"/>
    </sectiontype>
    <section type="Releases" name="*" attribute="Releases" required="yes"/>

    <!-- Partitioning Schema -->
    <sectiontype name="Partition">
        <key name="Type" datatype="string" required="yes"/>
        <key name="Size" datatype="byte-size" required="yes"/>
        <key name="Mount" datatype="string" required="no"/>
        <key name="SoftUpdates" datatype="boolean" default="true" required="no"/>
    </sectiontype>

    <sectiontype name="PartitionMap">
        <multisection type="Partition" name="+" attribute="Partition" required="yes"/>
    </sectiontype>
    
    <sectiontype name="Partitions">
        <multisection type="PartitionMap" name="+" attribute="PartitionMap" required="yes"/>
    </sectiontype>
    <section type="Partitions" name="*" attribute="Partitions" required="no"/>

    <!-- Packaging Schema -->
    <sectiontype name="BuildOptions" keytype="string">
        <key name="+" datatype="string" attribute="Options" required="yes"/>
    </sectiontype>
    
    <sectiontype name="Package">
        <key name="Port" datatype="string" required="yes"/>
        <key name="Package" datatype="string" required="yes"/>
        <section type="BuildOptions" name="*" attribute="BuildOptions" required="no"/>
    </sectiontype>

    <sectiontype name="PackageSet">
        <multisection type="Package" name="*" attribute="Package" required="yes"/>
    </sectiontype>

    <sectiontype name="PackageSets">
        <multisection type="PackageSet" name="*" attribute="PackageSet" required="yes"/>
    </sectiontype>
    <section type="PackageSets" name="*" attribute="PackageSets" required="no"/>

    <!-- Installation Configuration -->
    <sectiontype name="Disk">
        <key name="PartitionMap" datatype="string" required="yes"/>
    </sectiontype>

    <sectiontype name="Installation">
        <key name="Release" datatype="string" required="yes"/>
        <multikey name="PackageSet" datatype="string" required="no"/>
        <multisection type="Disk" name="+" attribute="Disk" required="yes"/>
    </sectiontype>

    <sectiontype name="Installations">
        <multisection type="Installation" name="+" attribute="Installation" required="yes"/>
    </sectiontype>
    <section type="Installations" name="*" attribute="Installations" required="no"/>

    <!-- Logging Configuration -->
    <import package="ZConfig.components.logger"/>
    <sectiontype name="Logging" extends="eventlog"/>
    <section type="Logging" name="*" attribute="Logging" required="yes"/>
</schema>
